{
  "articleId": "KB003",
  "title": "Resolving Database Connection Issues in Gainsight Adapter",
  "content": "## Issue\nThe Gainsight Adapter may encounter database connection failures, typically reported as 'Database connection failed: Connection refused' in the logs. This prevents the adapter from processing connector requests properly.\n\n## Root Cause\nCommon causes include:\n1. Database server is down or unreachable\n2. Network connectivity issues between the adapter and database\n3. Database authentication failures\n4. Connection pool exhaustion\n5. Database resource constraints\n\n## Diagnostic Steps\n1. **Verify database server status**:\n   ```bash\n   ping db-server-03\n   telnet db-server-03 5432\n   ```\n\n2. **Check database service**:\n   ```bash\n   ssh admin@db-server-03\n   systemctl status postgresql\n   ```\n\n3. **Review database logs**:\n   ```bash\n   tail -n 100 /var/log/postgresql/postgresql.log\n   ```\n\n4. **Check connection pool settings**:\n   Review the connection pool configuration in the adapter settings:\n   - Maximum pool size\n   - Connection timeout\n   - Connection validation query\n\n## Solution\n1. **Restart database server** (if down)\n   ```bash\n   ssh admin@db-server-03\n   sudo systemctl restart postgresql\n   ```\n\n2. **Increase connection pool size** (if pool exhaustion)\n   Modify the adapter configuration in `application.properties`:\n   ```properties\n   spring.datasource.hikari.maximum-pool-size=20\n   spring.datasource.hikari.connection-timeout=30000\n   ```\n\n3. **Implement connection retry logic**\n   Configure automatic retry in the adapter:\n   ```properties\n   adapter.db.retry.maxAttempts=3\n   adapter.db.retry.backoffPeriod=5000\n   ```\n\n## Prevention\n- Set up monitoring for database connectivity\n- Implement health checks in the adapter\n- Configure proactive alerts for connection pool metrics\n- Ensure database maintenance procedures are scheduled during off-hours",
  "tags": ["database", "connection", "postgresql", "gainsight-adapter", "troubleshooting"],
  "createdAt": "2023-03-05T08:15:00Z",
  "updatedAt": "2023-05-28T11:20:00Z",
  "author": "Database Team"
} 